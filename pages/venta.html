<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G€striCredits</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <style>
        body {
            background-color: #333;
        }
        .header {
            top: 0;
            position: fixed; 
            width: 100%;
            z-index: 1000; 
            color: beige;
        }
        .contenido {
            margin-top: 10rem;
        }
        .nav-wrapper {
            background-color: #333;
            padding-right: 20px; /* Espacio a la derecha */
        }
        .brand-logo {
            margin-left: 10px;
        }
        .nav-wrapper .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            max-width: calc(100% - 40px);
        }
        .nav-wrapper ul {
            display: flex;
            justify-content: center;
            margin: 0;
            padding: 0;
        }
        .nav-wrapper ul li {
            margin: 0 15px;
        }
        @media only screen and (max-width: 992px) {
            .nav-wrapper ul {
                display: none;
            }
            .sidenav {
                width: 250px;
            }
        }
        .container {
            margin-top: 20px;
            color: #fff; 
        }
        .card-image img {
            height: 200px;
            object-fit: cover;
        }
        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .modal-content {
            overflow-y: auto;
        }
        .carousel .carousel-item img {
            width: 100%;
            height: auto;
        }
        .carousel.carousel-slider {
            height: 300px;
        }
        .carousel-fixed-item {
            display: none;
        }
        .search-form {
            margin-bottom: 30px;
        }
        .card-title {
            font-weight: 700;
        }
        #nombre {
            color: #ffffff;
            font-weight: bold;
        }
        .search-form input {
            margin-bottom: 10px;
        }
        .search-form .input-field {
            margin: 0;
        }
        .search-form .btn {
            margin-right: 10px;
        }
        .reset-button {
            background-color: red;
            color: white;
        }
        .card-content {
            color: black;
        }
        .page-footer {
            background-color: #222;
            color: beige;
            padding: 40px 0;
        }
        .page-footer .container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            color: #333;
        }
        .page-footer h5 {
            margin-bottom: 20px;
        }
        .page-footer ul {
            list-style: none;
            padding: 0;
        }
        .page-footer ul li {
            margin-bottom: 10px;
        }
        .page-footer ul a {
            color: beige;
            text-decoration: none;
        }
        .page-footer ul a:hover {
            text-decoration: underline;
        }
        .footer-copyright {
            background-color: #111;
            padding: 10px 0;
            text-align: center;
        }
        .whatsapp-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #25D366;
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            font-size: 30px;
            cursor: pointer;
            z-index: 1000;
        }
        .titulaso {
            color: #fff;
        }
    </style>
</head>
<body>
    <nav class="header">
        <div class="nav-wrapper">
            <a href="../index.html" class="brand-logo">G€striCredits</a>
            <a href="#" data-target="mobile-menu" class="sidenav-trigger">
                <i class="material-icons">menu</i>
            </a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="../index.html">Inicio</a></li>
                <li><a href="venta.html">Venta</a></li>
                <li><a href="alquilar.html">Alquilar</a></li>
                <li><a href="noticias.html">Noticias</a></li>
                <li><a href="empresa.html">Empresa</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
        </div>
    </nav>

    <!-- Sidenav -->
    <ul id="mobile-menu" class="sidenav">
        <li><a href="../index.html">Inicio</a></li>
        <li><a href="venta.html">Venta</a></li>
        <li><a href="alquilar.html">Alquilar</a></li>
        <li><a href="noticias.html">Noticias</a></li>
        <li><a href="empresa.html">Empresa</a></li>
        <li><a href="contacto.html">Contacto</a></li>
    </ul>

    <div class="contenido">
        <div class="container" id="propiedades">
            <h1 class="titulaso">Propiedades en Venta</h1>
            
            <!-- Formulario de búsqueda -->
            <div class="search-form">
                <form id="search-form">
                    <div class="row">
                        <div class="input-field col s12 m4">
                            <input id="ubicacion" type="text" class="validate">
                            <label for="ubicacion">Ubicación</label>
                        </div>
                        <div class="input-field col s12 m4">
                            <input id="precio-min" type="number" class="validate">
                            <label for="precio-min">Precio Mínimo (€)</label>
                        </div>
                        <div class="input-field col s12 m4">
                            <input id="precio-max" type="number" class="validate">
                            <label for="precio-max">Precio Máximo (€)</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <button class="btn waves-effect waves-light" type="submit">Buscar
                                <i class="material-icons right">search</i>
                            </button>
                            <button class="btn reset-button waves-effect waves-light" type="button" id="reset-button">Restablecer</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="row" id="nuevas-propiedades">
                <!-- Propiedad 1 -->
                <div class="col s12 m6 card-item" data-ubicacion="Madrid" data-precio="300000">
                    <div class="card" onclick="openModal(1)">
                        <div class="card-image">
                            <img src="../drawable/propiedades/propiedad1/croquetas.jpg" alt="Propiedad 1">
                            <span class="card-title" id="nombre">Propiedad 1</span>
                        </div>
                        <div class="card-content">
                            <p>Ubicación: Madrid</p>
                            <p>Precio: 300,000€</p>
                            <p>Descripción: Hermoso apartamento en el centro de la ciudad.</p>
                        </div>
                    </div>
                </div>


 
                <div class='col s12 m6 card-item' data-ubicacion='qweqwe' data-precio='qwe'>
    <div class='card' onclick='openModal(3)'>
        <div class='card-image'>
            <img src='../drawable/images/croquetas.jpg' alt='Imagen de la Propiedad'>
            <span class='card-title' id="nombre">qwe</span>
        </div>
        <div class='card-content'>
            <p>Ubicaci&oacuten: qweqwe</p>
            <p>Precio: qwe&euro;</p>
            <p>Descripci&oacuten: qwe</p>
        </div>
    </div>
</div>
<!-- INSERTAR AQUI -->

                <!-- Modal Structure 1 -->
                <div id="modal1" class="modal">
                    <div class="modal-content">
                        <h4>Propiedad 1</h4>
                        <div class="carousel carousel-slider">
                            <a class="carousel-item" href="#one!"><img src="../drawable/propiedades/propiedad1/croquetas.jpg" alt="Image 1"></a>
                            <a class="carousel-item" href="#two!"><img src="../drawable/propiedades/propiedad1/croquetas.jpg" alt="Image 2"></a>
                            <a class="carousel-item" href="#three!"><img src="../drawable/propiedades/propiedad1/croquetas.jpg" alt="Image 3"></a>
                        </div>
                        <p>Ubicación: Madrid</p>
                        <p>Precio: 300,000€</p>
                        <p>Descripción: Hermoso apartamento en el centro de la ciudad.</p>
                    </div>
                    <div class="modal-footer">
                        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cerrar</a>
                    </div>
                </div>

</div>
<div id='modal3' class='modal'>
    <div class='modal-content'>
        <h4>qwe</h4>
        <p>qwe</p>
    </div>
    <div class='modal-footer'>
        <a href='#!' class='modal-close waves-effect waves-green btn-flat'>Cerrar</a>
    </div>
</div>
<!-- INSERTAR MODALES AQUI -->
            </div>
        </div>
    </div>

    <div class="whatsapp-button" onclick="window.open('https://wa.me/1234567890', '_blank')">
        <i class="material-icons">chat</i>
    </div>

    <!-- Pie de página -->
    <footer class="page-footer">
        <div class="container">
            <h5 class="white-text">G€striCredits</h5>
            <ul>
                <li><a class="white-text" href="../index.html">Inicio</a></li>
                <li><a class="white-text" href="venta.html">Venta</a></li>
                <li><a class="white-text" href="alquilar.html">Alquilar</a></li>
                <li><a class="white-text" href="noticias.html">Noticias</a></li>
                <li><a class="white-text" href="empresa.html">Empresa</a></li>
                <li><a class="white-text" href="contacto.html">Contacto</a></li>
            </ul>
        </div>
        <div class="footer-copyright">
            <div class="container">
                © 2024 G€striCredits
            </div>
        </div>
    </footer>

    <!-- Scripts de Materialize -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            M.Sidenav.init(document.querySelectorAll('.sidenav'));
            M.Modal.init(document.querySelectorAll('.modal'));
            M.Carousel.init(document.querySelectorAll('.carousel'));
        });

        // Función para abrir el modal
        function openModal(modalId) {
            var modal = document.getElementById('modal' + modalId);
            var instance = M.Modal.getInstance(modal);
            instance.open();
        }

        // Función para añadir una nueva propiedad
        function añadirPropiedad(id, nombre, ubicacion, precio, descripcion, imagenes) {
            var contenedor = document.getElementById('nuevas-propiedades');
            
            // Crear nuevo elemento de propiedad
            var propiedadHTML = `
                <div class="col s12 m6 card-item" data-ubicacion="${ubicacion}" data-precio="${precio}">
                    <div class="card" onclick="openModal(${id})">
                        <div class="card-image">
                            <img src="${imagenes[0]}" alt="Propiedad ${id}">
                            <span class="card-title" id="nombre">${nombre}</span>
                        </div>
                        <div class="card-content">
                            <p>Ubicación: ${ubicacion}</p>
                            <p>Precio: ${precio}€</p>
                            <p>Descripción: ${descripcion}</p>
                        </div>
                    </div>
                </div>
                
                <!-- Modal Structure -->
                <div id="modal${id}" class="modal">
                    <div class="modal-content">
                        <h4>${nombre}</h4>
                        <div class="carousel carousel-slider">
                            ${imagenes.map(img => `<a class="carousel-item" href="#!"><img src="${img}" alt="Imagen ${id}"></a>`).join('')}
                        </div>
                        <p>${descripcion}</p>
                    </div>
                    <div class="modal-footer">
                        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cerrar</a>
                    </div>
                </div>
            `;
            
            contenedor.insertAdjacentHTML('beforeend', propiedadHTML);
            
            // Re-inicializar los modales y carouseles
            M.Modal.init(document.querySelectorAll('.modal'));
            M.Carousel.init(document.querySelectorAll('.carousel'));
        }

        // Ejemplo de uso
        //añadirPropiedad(2, 'Propiedad 2', 'Barcelona', 500000, 'Espacioso apartamento con vistas al mar.', ['../drawable/propiedades/propiedad2/imagen1.jpg', '../drawable/propiedades/propiedad2/imagen2.jpg']);

        // Manejo del formulario de búsqueda
        document.getElementById('search-form').addEventListener('submit', function(event) {
            event.preventDefault();
            var ubicacion = document.getElementById('ubicacion').value.toLowerCase();
            var precioMin = parseFloat(document.getElementById('precio-min').value) || 0;
            var precioMax = parseFloat(document.getElementById('precio-max').value) || Infinity;

            var propiedades = document.querySelectorAll('.card-item');

            propiedades.forEach(function(propiedad) {
                var propUbicacion = propiedad.getAttribute('data-ubicacion').toLowerCase();
                var propPrecio = parseFloat(propiedad.getAttribute('data-precio'));

                if (propUbicacion.includes(ubicacion) && propPrecio >= precioMin && propPrecio <= precioMax) {
                    propiedad.style.display = 'block';
                } else {
                    propiedad.style.display = 'none';
                }
            });
        });

        // Manejo del botón de restablecer
        document.getElementById('reset-button').addEventListener('click', function() {
            document.getElementById('ubicacion').value = '';
            document.getElementById('precio-min').value = '';
            document.getElementById('precio-max').value = '';

            var propiedades = document.querySelectorAll('.card-item');
            propiedades.forEach(function(propiedad) {
                propiedad.style.display = 'block';
            });
        });
    </script>
</body>
</html>
